# API Collective Memories - Documentation

## üìã Informations g√©n√©rales

**Nom** : Collective Memories API  
**Version** : 1.1.0  
**Description** : API REST pour l'application de m√©moires collectives. Gestion utilisateurs, groupes, m√©moires, fichiers, tags. Authentification JWT. SMTP int√©gr√©.  
**Base URL** : https://votre site/cmem1_API/  
**Documentation** : https://votre site/api/docs  
**Format** : JSON  
**Encodage** : UTF-8  
**Authentification** : JWT Bearer Token  
**CORS** : Ouvert (Access-Control-Allow-Origin: *)  

### üîê Types d'endpoints
- ‚≠ê **PUBLIC** : Accessible sans authentification
- üîí **USER** : N√©cessite une authentification utilisateur
- üîí **ADMIN** : N√©cessite des privil√®ges administrateur

### üìä Statut syst√®me
‚úÖ **API** : Op√©rationnelle  
‚úÖ **Base de donn√©es** : Connect√©e (charset: utf8mb4)  
‚úÖ **SMTP** : Int√©gr√© (votre serveur:587, TLS)  
‚úÖ **Tests** : 100% de r√©ussite sur tous les endpoints  
üïê **Heure serveur** : Dynamique (ex: 2025-08-04 17:56:34)  

### üîÑ Derni√®res am√©liorations (Septembre 2025)
- ‚úÖ **API REST compl√®te** : Tous les endpoints avec m√©thodes HTTP appropri√©es (GET, POST, PUT, DELETE)
- ‚úÖ **Sections validation compl√®tes** : R√®gles de validation d√©taill√©es pour tous les endpoints
- ‚úÖ **Error responses standardis√©es** : Codes d'erreur coh√©rents 
- ‚úÖ **Conformit√© API_ENDPOINTS.json** : Documentation synchronis√©e avec la sp√©cification officielle
- ‚úÖ **Messages d'erreur en fran√ßais** : Am√©lioration de l'exp√©rience utilisateur
- ‚úÖ **Sistema de tags avanc√©** : Gestion compl√®te des tags avec associations multiples

## üì° En-t√™tes HTTP

### Requ√™tes
```
Content-Type: application/json
Authorization: Bearer <token> (pour les routes prot√©g√©es)
```

### R√©ponses
```
Content-Type: application/json; charset=utf-8
Access-Control-Allow-Origin: *
```

## üéØ Exigences Frontend

- **Authentification** : JWT Bearer tokens dans l'en-t√™te Authorization  
- **Content-Type** : application/json pour les donn√©es POST/PUT  
- **CORS** : CORS ouvert (Access-Control-Allow-Origin: *)  
- **Uploads** : multipart/form-data pour les uploads (images, docs, audio, vid√©o)  

## üìè Limites syst√®me

### Pagination
- **Maximum** : 100 √©l√©ments par page

### Uploads
- **Images** : 5 MB maximum  
- **Documents** : 10 MB maximum  
- **Audio** : 20 MB maximum  
- **Vid√©o** : 50 MB maximum  
- **Avatars** : 2 MB maximum  

### Rate Limiting
- **Limite** : 100 requ√™tes/heure/IP

### Types de fichiers support√©s
- **Images** : JPEG, PNG, GIF, WebP  
- **Documents** : PDF, TXT, DOC, DOCX  
- **Audio** : MP3, WAV, OGG  
- **Vid√©o** : MP4, AVI, MOV  

## ‚úÖ Validation des donn√©es

L'API effectue une validation stricte des donn√©es d'entr√©e pour tous les endpoints qui en n√©cessitent :

### Types de validation
- **Champs requis** : V√©rification de pr√©sence des donn√©es obligatoires
- **Format email** : Validation RFC pour les adresses email  
- **Longueur de cha√Ænes** : Respect des limites min/max de caract√®res
- **Formats de dates** : Format YYYY-MM-DD strictement appliqu√©
- **Tokens** : V√©rification de validit√© et d'expiration
- **Mots de passe** : Minimum 6 caract√®res requis

### R√©ponses de validation
En cas d'erreur de validation, l'API retourne un code **400** avec le d√©tail des erreurs :
```json
{
  "success": false,
  "message": "Donn√©es de validation invalides", 
  "errors": {
    "field": ["Message de validation sp√©cifique"]
  }
}
```

## üìß Syst√®me d'emails

L'API int√®gre un syst√®me d'emails automatique avec SMTP s√©curis√© :

### Types d'emails automatiques
- **Email de bienvenue** : Envoy√© automatiquement lors de l'inscription avec token de v√©rification  
- **R√©initialisation de mot de passe** : Avec token s√©curis√©  
- **V√©rification d'email** : Token pour activer le compte  
- **Invitation de groupe** : Email avec lien d'acceptation  
- **Notification nouvelle m√©moire** : Notification aux membres du groupe (si applicable)  

### Configuration SMTP
- **Serveur** : votre serveur:587  
- **S√©curit√©** : TLS encryption  
- **Templates** : HTML responsive  
- **Mode d√©veloppement** : Emails logg√©s uniquement  
- **Serveur** : votre serveur:587  
- **S√©curit√©** : TLS encryption  
- **Templates** : HTML responsive  
- **Mode d√©veloppement** : Emails logg√©s uniquement  

---

# üì° Endpoints Public

## GET `/`
**Description** : Obtenir des informations sur l'API

**Authentification** : ‚≠ê Non requise

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "API_info",
  "data": {
    "name": "Collective Memories API",
    "version": "1.1.0",
    "description": "API REST pour l'application de m√©moires collectives",
    "status": "Op√©rationnelle",
    "server_time": "2025-09-10 17:56:34",
    "database": {
      "status": "Connect√©e",
      "charset": "utf8mb4"
    },
    "email": {
      "smtp": true,
      "server": "votre serveur:587",
      "security": "TLS"
    }
  }
}
```

**R√©ponses d'erreur** :
- `500` : Erreur serveur critique

---

## GET `/help`
**Description** : Fourni de l'aide sur les endpoints de l'API

**Authentification** : ‚≠ê Non requise

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "help",
  "data": {
    "endpoints": { /* Liste compl√®te des endpoints disponibles */ },
    "authentication": "JWT Bearer Token",
    "base_url": "https://votre site/cmem1_API/"
  }
}
```

**R√©ponses d'erreur** :
- `500` : Erreur serveur lors de la g√©n√©ration de l'aide

---

## GET `/health`
**Description** : V√©rifier le statut de l'API

**Authentification** : ‚≠ê Non requise

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "health_status",
  "data": {
    "status": "OK",
    "message": "API Collective Memories op√©rationnelle",
    "timestamp": "2025-09-10 14:30:00",
    "version": "1.1.0",
    "database": "Connect√©e",
    "smtp": "Fonctionnel"
  }
}
```

**R√©ponses d'erreur** :
- `500` : Erreur serveur lors de la v√©rification du statut
- `503` : Service temporairement indisponible

---

## POST `/users/register`
**Description** : Cr√©er un nouveau compte utilisateur

**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "name": "Jean Dupont",
  "email": "user@example.com",
  "password": "motdepasse123",
  "bio": "Historien passionn√©",
  "phone": "0600000002",
  "date_of_birth": "1990-02-15",
  "location": "Lyon"
}
```

**Validation** :
- `name` : requis, 2-255 caract√®res
- `email` : requis, email valide, unique
- `password` : requis, 6 caract√®res minimum
- `bio` : optionnel, texte libre
- `phone` : optionnel, num√©ro de t√©l√©phone
- `date_of_birth` : optionnel, format YYYY-MM-DD
- `location` : optionnel, lieu de r√©sidence

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Nouvel utilisateur cr√©√©. Un email de v√©rification a √©t√© envoy√©.",
  "data": {
    "user": {
      "id": 1,
      "name": "Jean Dupont",
      "email": "user@example.com",
      "role": "UTILISATEUR",
      "email_verified": 0,
      "created_at": "2025-09-10 14:30:00"
    },
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es invalides
- `409` : Cet email est d√©j√† utilis√©, peut-√™tre d√©sactiv√©. Vous devez vous connecter ou le r√©activer
- `500` : Erreur lors de la cr√©ation de l'utilisateur

---

## POST `/users/login`
**Description** : Se connecter

**Note** : L'email doit √™tre v√©rifi√© pour pouvoir se connecter
**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "email": "user@example.com",
  "password": "motdepasse123"
}
```

**Validation** :
- `email` : requis, email valide
- `password` : requis, 6 caract√®res minimum

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Connexion r√©ussie",
  "data": {
    "user": {
      "id": 1,
      "name": "Jean Dupont",
      "email": "user@example.com",
      "role": "UTILISATEUR",
      "email_verified": 1,
      "last_login": "2025-09-10 14:30:00"
    },
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Identifiants invalides
- `403` : Compte d√©sactiv√© ou email non v√©rifi√© (avec options d'action)
- `500` : Erreur interne du serveur

---

## POST `/users/request-password-reset`
**Description** : Demander une r√©initialisation de mot de passe (par email)

**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "email": "user@example.com"
}
```

**Validation** :
- `email` : requis, email valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Si cet email existe, un lien de r√©initialisation a √©t√© envoy√©"
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors de la g√©n√©ration du token ou de l'envoi de l'email

---

## POST `/users/reset-password`
**Description** : Changer le mot de passe avec un token

**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "token": "dsf√©lg...",
  "new_password": "nouveauMotDePasse123"
}
```

**Validation** :
- `token` : requis, token valide non expir√©
- `new_password` : requis, 6 caract√®res minimum

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Mot de passe chang√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `404` : Token non trouv√©, invalide ou expir√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors du changement de mot de passe

---

## POST `/users/resend-verification`
**Description** : Renvoyer l'email de v√©rification pour un compte non v√©rifi√©

**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "email": "user@example.com"
}
```

**Validation** :
- `email` : requis, email valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Un nouvel email de v√©rification a √©t√© envoy√© √† votre adresse",
  "data": {
    "email": "user@example.com",
    "expires_in": "24 heures"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides ou email d√©j√† v√©rifi√©
- `404` : Aucun compte associ√© √† cette adresse email
- `500` : Erreur lors de l'envoi de l'email

---

## POST `/users/verify-email`
**Description** : V√©rifier l'adresse email avec un token

**Authentification** : ‚≠ê Non requise

**Donn√©es attendues** :
```json
{
  "token": "ajsdfhkasdf"
}
```

**Validation** :
- `token` : requis, token valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Email v√©rifi√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `404` : Utilisateur non trouv√© ou token invalide
- `500` : Erreur lors de la v√©rification

---

## GET `/groups/public`
**Description** : Lister les groupes publics

**Authentification** : ‚≠ê Non requise

**Param√®tres de requ√™te** :
- `q` : terme recherch√© (optionnel, 2-255 caract√®res)
- `page` : num√©ro de page (optionnel, entier >= 1)
- `page_size` : taille de page (optionnel, entier 1-100)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "id": 1,
        "name": "Groupe Public",
        "description": "Description du groupe",
        "visibility": "public",
        "member_count": 15,
        "created_at": "2025-09-01 10:00:00"
      }
    ],
    "pagination": {
      "current_page": 1,
      "per_page": 20,
      "total": 45,
      "total_pages": 3
    }
  }
}
```

**R√©ponses d'erreur** :
- `400` : Param√®tres de validation invalides
- `500` : Erreur serveur lors de la r√©cup√©ration

---

# üë• Endpoints Users

## POST `/users/avatar`
**Description** : Mettre √† jour son propre avatar

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
- Fichier : `avatar` (multipart/form-data)

**Validation** :
- `avatar` : requis, fichier image (JPEG, PNG, GIF), taille max 2MB

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Avatar mis √† jour avec succ√®s",
  "data": {
    "avatar_url": "/uploads/avatars/1_avatar.jpg",
    "user_id": 1
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `400` : Aucun fichier avatar upload√©
- `400` : Fichier avatar invalide
- `500` : Erreur lors de l'enregistrement du fichier avatar

---

## POST `/users/{id}/avatar`
**Description** : Mettre √† jour l'avatar d'un autre utilisateur

**Authentification** : üîí Admin

**Donn√©es attendues** :
- Fichier : `avatar` (multipart/form-data)

**Validation** :
- `avatar` : requis, fichier image (JPEG, PNG, GIF), taille max 2MB
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Avatar mis √† jour avec succ√®s",
  "data": {
    "avatar_url": "/uploads/avatars/1_avatar.jpg",
    "user_id": 1
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `400` : Aucun fichier avatar upload√©
- `400` : Fichier avatar invalide
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors de l'enregistrement du fichier avatar

---

## PUT `/users/password`
**Description** : Changer son propre mot de passe

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "current_password": "motDePasseActuel",
  "new_password": "nouveauMotDePasse123"
}
```

**Validation** :
- `current_password` : requis, mot de passe actuel
- `new_password` : requis, 6 caract√®res minimum

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Mot de passe chang√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Mot de passe actuel incorrect
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors du changement de mot de passe

---

## PUT `/users/{id}/password`
**Description** : Changer le mot de passe d'un utilisateur par un administrateur

**Authentification** : üîí Admin

**Donn√©es attendues** :
```json
{
  "new_password": "nouveauMotDePasse123"
}
```

**Validation** :
- `new_password` : requis, 6 caract√®res minimum
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Mot de passe chang√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors du changement de mot de passe

---

## POST `/users/logout`
**Description** : Se d√©connecter

**Authentification** : üîí Utilisateur

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "D√©connexion r√©ussie"
}
```

**R√©ponses d'erreur** :
- `401` : Utilisateur non authentifi√©
- `500` : Erreur serveur lors de la d√©connexion

---

## GET `/users`
**Description** : Obtenir la liste de tous les utilisateurs

**Authentification** : üîí Admin

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, entier >= 1)
- `limite` : nombre d'√©l√©ments par page (optionnel, entier 1-100)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Liste des utilisateurs",
  "data": {
    "users": [
      {
        "id": 1,
        "name": "Jean Dupont",
        "email": "user@example.com",
        "role": "UTILISATEUR",
        "email_verified": 1,
        "last_login": "2025-09-10 10:00:00",
        "created_at": "2025-01-01 10:00:00",
        "deleted_at": null
      }
    ],
    "total_users": 202,
    "page": 2,
    "limit": 30,
    "total_pages": 7
  }
}
```

**R√©ponses d'erreur** :
- `401` : Utilisateur non authentifi√©
- `403` : Acc√®s non autoris√©
- `500` : Erreur serveur lors de la r√©cup√©ration des utilisateurs

---

## GET `/users/me`
**Description** : R√©cup√©rer son propre profil

**Authentification** : üîí Utilisateur

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Profil r√©cup√©r√©",
  "data": {
    "id": 1,
    "name": "Jean Dupont",
    "email": "user@example.com",
    "role": "UTILISATEUR",
    "profile_image": "/uploads/avatars/1.jpg",
    "bio": "Historien passionn√©",
    "phone": "0600000002",
    "date_of_birth": "1990-02-15",
    "location": "Lyon",
    "email_verified": 1,
    "last_login": "2025-09-10 10:00:00",
    "created_at": "2025-01-01 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `401` : Utilisateur non authentifi√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur serveur lors de la r√©cup√©ration de l'utilisateur

---

## GET `/users/{id}`
**Description** : R√©cup√©rer le profil d'un utilisateur

**Authentification** : üîí Admin

**Validation** :
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Profil r√©cup√©r√©",
  "data": {
    "id": 1,
    "name": "Jean Dupont",
    "email": "user@example.com",
    "role": "UTILISATEUR",
    "profile_image": "/uploads/avatars/1.jpg",
    "bio": "Historien passionn√©",
    "phone": "0600000002",
    "date_of_birth": "1990-02-15",
    "location": "Lyon",
    "email_verified": 1,
    "last_login": "2025-09-10 10:00:00",
    "created_at": "2025-01-01 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `401` : Utilisateur non authentifi√©
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur serveur lors de la r√©cup√©ration de l'utilisateur

---

## PUT `/users/me`
**Description** : Modifier son propre profil

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "name": "Jean Martin NOUVEAU",
  "email": "nouveau@email.com",
  "bio": "Nouvelle biographie...",
  "phone": "0611223344",
  "date_of_birth": "1990-01-15",
  "location": "Paris"
}
```

**Validation** :
- `name` : optionnel, 2-255 caract√®res
- `email` : optionnel, email valide, unique
- `bio` : optionnel, texte libre
- `phone` : optionnel, num√©ro de t√©l√©phone
- `date_of_birth` : optionnel, format YYYY-MM-DD
- `location` : optionnel, lieu de r√©sidence

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Profil mis √† jour avec succ√®s",
  "data": {
    "id": 1,
    "name": "Jean Martin NOUVEAU",
    "email": "nouveau@email.com",
    "role": "UTILISATEUR",
    "profile_image": "avatars/123_avatar.jpg",
    "bio": "Nouvelle biographie...",
    "phone": "0611223344",
    "date_of_birth": "1990-01-15",
    "location": "Paris",
    "email_verified": 1,
    "last_login": "2025-09-10 10:00:00",
    "created_at": "2025-01-01 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `404` : Utilisateur non trouv√©
- `409` : Cet email est d√©j√† utilis√©
- `500` : Erreur lors de la mise √† jour

---

## PUT `/users/{id}`
**Description** : Modifier le profil d'un utilisateur par l'administrateur

**Authentification** : üîí Admin

**Donn√©es attendues** :
```json
{
  "name": "Jean Martin NOUVEAU",
  "email": "nouveau@email.com",
  "bio": "Nouvelle biographie...",
  "phone": "0611223344",
  "date_of_birth": "1990-01-15",
  "location": "Paris"
}
```

**Validation** :
- `name` : optionnel, 2-255 caract√®res
- `email` : optionnel, email valide, unique
- `bio` : optionnel, texte libre
- `phone` : optionnel, num√©ro de t√©l√©phone
- `date_of_birth` : optionnel, format YYYY-MM-DD
- `location` : optionnel, lieu de r√©sidence
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Profil mis √† jour avec succ√®s",
  "data": {
    "id": 1,
    "name": "Jean Martin NOUVEAU",
    "email": "nouveau@email.com",
    "role": "UTILISATEUR",
    "profile_image": "avatars/123_avatar.jpg",
    "bio": "Nouvelle biographie...",
    "phone": "0611223344",
    "date_of_birth": "1990-01-15",
    "location": "Paris",
    "email_verified": 1,
    "last_login": "2025-09-10 10:00:00",
    "created_at": "2025-01-01 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `409` : Cet email est d√©j√† utilis√©
- `500` : Erreur lors de la mise √† jour

---

## DELETE `/users/me`
**Description** : Supprimer son propre compte (soft delete)

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "password": "motDePasseActuel"
}
```

**Validation** :
- `password` : requis, mot de passe actuel

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Compte supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Mot de passe requis
- `401` : Mot de passe incorrect ou non authentifi√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors de la suppression

---

## DELETE `/users/{id}`
**Description** : Supprimer un compte (soft delete par d√©faut, ou hard delete)

**Authentification** : üîí Admin

**Donn√©es attendues** :
```json
{
  "force_delete": true
}
```

**Validation** :
- `force_delete` : optionnel, bool√©en pour suppression d√©finitive
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Compte supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur lors de la suppression

---

## POST `/users/{id}/restore`
**Description** : Restaurer un compte supprim√© (soft)

**Authentification** : üîí Admin

**Validation** :
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Compte restaur√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√© ou non supprim√©
- `500` : Erreur lors de la restauration

---

# üíæ Endpoints Memories

## GET `/memories`
**Description** : Lister les m√©moires (publiques si non authentifi√©, toutes si authentifi√©)

**Authentification** : ‚≠ê Optionnelle

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, d√©faut 1)
- `page_size` : taille de page (optionnel, d√©faut 20)
- `search` : terme de recherche (optionnel)
- `group_id` : filtrer par groupe (optionnel)
- `is_private` : filtrer par visibilit√© (optionnel)
- `date_from` : date d√©but (optionnel, format YYYY-MM-DD)
- `date_to` : date fin (optionnel, format YYYY-MM-DD)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "memories": [
      {
        "id": 1,
        "title": "Ma premi√®re m√©moire",
        "content": "Contenu abr√©g√©...",
        "visibility": "public",
        "location": "Paris, France",
        "date": "2025-07-20",
        "user_id": 1,
        "creator_name": "Jean Dupont",
        "tags_count": 2,
        "files_count": 1,
        "created_at": "2025-07-27 14:00:00"
      }
    ],
    "pagination": {
      "current_page": 1,
      "per_page": 20,
      "total": 45,
      "total_pages": 3
    }
  }
}
```

**R√©ponses d'erreur** :
- `400` : Param√®tres de validation invalides
- `500` : Erreur serveur lors de la r√©cup√©ration

---

## POST `/memories`
**Description** : Cr√©er une nouvelle m√©moire

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "title": "Titre de la m√©moire",
  "content": "Contenu d√©taill√© de la m√©moire...",
  "visibility": "private",
  "location": "Paris, France",
  "latitude": 48.8566,
  "longitude": 2.3522,
  "date": "2025-07-27"
}
```

**Validation** :
- `title` : requis, 3-255 caract√®res
- `content` : optionnel, texte libre
- `visibility` : optionnel, par d√©faut 'private'
- `location` : optionnel, lieu de r√©sidence
- `latitude` : optionnel, format d√©cimal
- `longitude` : optionnel, format d√©cimal
- `date` : optionnel, format YYYY-MM-DD

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "M√©moire cr√©√©e avec succ√®s",
  "data": {
    "id": 2,
    "title": "Titre de la m√©moire",
    "content": "Contenu d√©taill√©...",
    "visibility": "private",
    "location": "Paris, France",
    "latitude": 48.8566,
    "longitude": 2.3522,
    "date": "2025-07-27",
    "user_id": 1,
    "created_at": "2025-09-10 14:30:00",
    "updated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `500` : Erreur lors de la cr√©ation

---

## GET `/memories/{id}`
**Description** : R√©cup√©rer une m√©moire sp√©cifique

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID m√©moire valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "id": 1,
    "title": "Ma premi√®re m√©moire",
    "content": "Contenu complet de la m√©moire avec tous les d√©tails...",
    "visibility": "public",
    "location": "Paris, France",
    "latitude": 48.8566,
    "longitude": 2.3522,
    "date": "2025-07-20",
    "user_id": 1,
    "creator_name": "Jean Dupont",
    "elements": [
      {
        "id": 1,
        "type": "image",
        "title": "Photo du lieu",
        "url": "/uploads/memories/image1.jpg"
      }
    ],
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "color": "#3498db"
      }
    ],
    "created_at": "2025-07-27 14:00:00",
    "updated_at": "2025-07-27 14:00:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√© (m√©moire priv√©e)
- `404` : M√©moire non trouv√©e
- `500` : Erreur serveur

---

## PUT `/memories/{id}`
**Description** : Modifier une m√©moire

**Authentification** : üîí Propri√©taire ou Admin

**Donn√©es attendues** :
```json
{
  "title": "Nouveau titre",
  "content": "Nouveau contenu...",
  "is_private": true,
  "location": "Lyon, France",
  "latitude": 45.764,
  "longitude": 4.8357
}
```

**Validation** :
- `title` : optionnel, 3-255 caract√®res
- `content` : optionnel, texte libre
- `is_private` : optionnel, bool√©en
- `location` : optionnel, texte libre
- `latitude` : optionnel, format d√©cimal
- `longitude` : optionnel, format d√©cimal

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "M√©moire mise √† jour avec succ√®s",
  "data": {
    "id": 1,
    "title": "Nouveau titre",
    "content": "Nouveau contenu...",
    "visibility": "private",
    "location": "Lyon, France",
    "latitude": 45.764,
    "longitude": 4.8357,
    "updated_at": "2025-09-10 14:35:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : M√©moire non trouv√©e
- `500` : Erreur lors de la mise √† jour

---

## DELETE `/memories/{id}`
**Description** : Supprimer une m√©moire

**Authentification** : üîí Propri√©taire ou Admin

**Validation** :
- `id` : requis, ID m√©moire valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "M√©moire supprim√©e avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : M√©moire non trouv√©e
- `500` : Erreur lors de la suppression

---

## GET `/memories/my`
**Description** : R√©cup√©rer mes m√©moires

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, d√©faut 1)
- `page_size` : taille de page (optionnel, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "memories": [
      {
        "id": 1,
        "title": "Ma premi√®re m√©moire",
        "content": "Contenu abr√©g√©...",
        "visibility": "private",
        "location": "Paris, France",
        "date": "2025-07-20",
        "tags_count": 2,
        "files_count": 1,
        "created_at": "2025-07-27 14:00:00"
      }
    ],
    "pagination": {
      "current_page": 1,
      "per_page": 20,
      "total": 12,
      "total_pages": 1
    }
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## GET `/memories/search`
**Description** : Rechercher dans les m√©moires

**Authentification** : ‚≠ê Optionnelle

**Param√®tres de requ√™te** :
- `q` : terme recherch√© (requis)
- `page` : num√©ro de page (optionnel, d√©faut 1)
- `page_size` : taille de page (optionnel, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "memories": [
      {
        "id": 1,
        "title": "M√©moire contenant le terme",
        "content": "Extrait avec le terme recherch√© en surbrillance...",
        "visibility": "public",
        "score": 0.95,
        "created_at": "2025-07-27 14:00:00"
      }
    ],
    "search_term": "terme recherch√©",
    "pagination": {
      "current_page": 1,
      "per_page": 20,
      "total": 3,
      "total_pages": 1
    }
  }
}
```

**R√©ponses d'erreur** :
- `400` : Terme de recherche requis
- `500` : Erreur serveur

---

## POST `/memories/{id}/upload`
**Description** : Upload d'un fichier pour une m√©moire

**Authentification** : üîí Propri√©taire

**Donn√©es attendues** :
- Fichier : `file` (multipart/form-data)

**Validation** :
- `file` : requis, fichier valide selon les types autoris√©s
- `id` : requis, ID m√©moire valide

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Document upload√© et associ√©",
  "data": {
    "file_id": 15,
    "filename": "document.pdf",
    "file_url": "/uploads/memories/15/document.pdf",
    "file_type": "document",
    "file_size": 2048576,
    "memory_id": 1
  }
}
```

**R√©ponses d'erreur** :
- `400` : Aucun fichier valide upload√©
- `401` : Authentification requise
- `403` : Acc√®s non autoris√© (pas propri√©taire de la m√©moire)
- `404` : M√©moire non trouv√©e
- `413` : Fichier trop volumineux
- `415` : Type de fichier non support√©
- `500` : Erreur lors de l'upload
}
```

---

## POST `/memories/search`
**Description** : Rechercher dans les m√©moires

**Authentification** : Optionnelle

**Donn√©es attendues** :
```json
{
  "q": "terme recherch√©",
  "page": 1,
  "page_size": 20
}
```

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {}
}
```

---

## POST `/memories/upload/{id}`
**Description** : Upload d'un fichier pour une m√©moire

**Authentification** : Propri√©taire de la m√©moire

**Donn√©es attendues** :
- Fichier : `file` (multipart/form-data)

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Document upload√© et associ√©",
  "data": {}
}
```

---

# üß© Endpoints Elements

## POST `/elements`
**Description** : Cr√©er un √©l√©ment (texte, image, audio, vid√©o, document, etc.)

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "media_type": "text",
  "content": "Texte ou URL du fichier",
  "title": "Titre de l'√©l√©ment",
  "description": "Description optionnelle"
}
```

**Validation** :
- `media_type` : requis, text, image, audio, video, document, gpx, ical
- `title` : requis, 2-255 caract√®res
- `content` : optionnel, 5000 caract√®res max
- `description` : optionnel, texte libre

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "√âl√©ment cr√©√© avec succ√®s",
  "data": {
    "id": 1,
    "media_type": "text",
    "title": "Titre de l'√©l√©ment",
    "content": "Texte ou URL du fichier",
    "description": "Description optionnelle",
    "user_id": 1,
    "created_at": "2025-09-10 14:30:00",
    "updated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `500` : Erreur lors de la cr√©ation

---

## GET `/elements`
**Description** : Lister/rechercher les √©l√©ments

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `media_type` : filtrer par type (optionnel)
- `q` : terme de recherche (optionnel)
- `page` : num√©ro de page (optionnel, d√©faut 1)
- `page_size` : taille de page (optionnel, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "elements": [
      {
        "id": 1,
        "media_type": "text",
        "title": "Titre de l'√©l√©ment",
        "content": "Contenu abr√©g√©...",
        "description": "Description",
        "user_id": 1,
        "creator_name": "Jean Dupont",
        "created_at": "2025-09-10 14:30:00"
      }
    ],
    "pagination": {
      "current_page": 1,
      "per_page": 20,
      "total": 15,
      "total_pages": 1
    }
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## GET `/elements/{id}`
**Description** : R√©cup√©rer un √©l√©ment

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID √©l√©ment valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "id": 1,
    "media_type": "text",
    "title": "Titre de l'√©l√©ment",
    "content": "Contenu complet de l'√©l√©ment...",
    "description": "Description d√©taill√©e",
    "user_id": 1,
    "creator_name": "Jean Dupont",
    "created_at": "2025-09-10 14:30:00",
    "updated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : √âl√©ment non trouv√©
- `500` : Erreur serveur

---

## PUT `/elements/{id}`
**Description** : Modifier un √©l√©ment

**Authentification** : üîí Propri√©taire ou Admin

**Donn√©es attendues** :
```json
{
  "title": "Nouveau titre",
  "content": "Nouveau contenu",
  "description": "Nouvelle description"
}
```

**Validation** :
- `title` : optionnel, 2-255 caract√®res
- `content` : optionnel, 5000 caract√®res max
- `description` : optionnel, texte libre

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "√âl√©ment mis √† jour avec succ√®s",
  "data": {
    "id": 1,
    "media_type": "text",
    "title": "Nouveau titre",
    "content": "Nouveau contenu",
    "description": "Nouvelle description",
    "updated_at": "2025-09-10 14:35:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : √âl√©ment non trouv√©
- `500` : Erreur lors de la mise √† jour

---

## DELETE `/elements/{id}`
**Description** : Supprimer un √©l√©ment

**Authentification** : üîí Propri√©taire ou Admin

**Validation** :
- `id` : requis, ID √©l√©ment valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "√âl√©ment supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : √âl√©ment non trouv√©
- `500` : Erreur lors de la suppression
}
```

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "√âl√©ment mis √† jour avec succ√®s",
  "data": {}
}
```

---

## POST `/elements/delete/{id}`
**Description** : Supprimer un √©l√©ment

**Authentification** : Propri√©taire ou admin

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "√âl√©ment supprim√© avec succ√®s"
}
```

---

# üè∑Ô∏è Endpoints Tags

## POST `/tags`
**Description** : Cr√©er un tag

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "name": "Histoire",
  "table_associate": "memories",
  "color": "#3498db"
}
```

**Validation** :
- `name` : requis, 1-100 caract√®res
- `table_associate` : optionnel, in('groups','memories','elements','files','all')
- `color` : optionnel, format #RRGGBB

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Tag cr√©√© avec succ√®s",
  "data": {
    "id": 1,
    "name": "Histoire",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "created_at": "2025-09-10 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es invalides
- `401` : Utilisateur non authentifi√©
- `500` : Erreur lors de la cr√©ation

---

## GET `/tags`
**Description** : Lister/rechercher les tags

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `q` : terme de recherche (optionnel)
- `table_associate` : filtrer par table (optionnel, in('groups','memories','elements','files','all'))
- `page` : num√©ro de page (optionnel, >= 1)
- `limit` : nombre d'√©l√©ments (optionnel, 1-50)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "R√©sultats de recherche",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "tag_owner": 1,
        "usage_count": 5,
        "created_at": "2025-09-10 10:00:00"
      }
    ],
    "search_term": "Histoire",
    "table_associate": "memories",
    "page": 1,
    "limit": 20,
    "total": 5
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `400` : Param√®tres de validation invalides
- `500` : Erreur serveur
- `table_associate` : optionnel, in('groups','memories','elements','files','all')
- `page` : optionnel, num√©ro de page >= 1
- `limit` : optionnel, nombre d'√©l√©ments 1-50

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "R√©sultats de recherche",
  "data": {
    "tags": [],
    "search_term": "Histoire",
    "table_associate": "memories",
    "page": 1,
    "limit": 20
  }
}
```

---

## POST `/tags/get/{id}`
**Description** : D√©tail d'un tag

**Authentification** : Requise (propri√©taire du tag ou admin)

**Validation** :
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "D√©tails du tag r√©cup√©r√©s",
  "data": {
    "id": 1,
    "name": "Histoire",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "usage_count": 5,
    "created_at": "2025-08-26 10:00:00",
    "updated_at": "2025-08-26 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `403` : Acc√®s non autoris√©
- `404` : Tag non trouv√©

---

## POST `/tags/update/{id}`
**Description** : Modifier un tag

**Authentification** : Requise (propri√©taire du tag ou admin)

**Donn√©es attendues** :
```json
{
  "name": "Nouveau nom",
  "table_associate": "memories",
  "color": "#3498db"
}
```

**Validation** :
- `id` : requis, ID du tag num√©rique
- `name` : optionnel, 1-100 caract√®res
- `table_associate` : optionnel, in('groups','memories','elements','files','all')
- `color` : optionnel, format #RRGGBB

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag modifi√© avec succ√®s",
  "data": {
    "id": 1,
    "name": "Nouveau nom",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "created_at": "2025-08-26 10:00:00",
    "updated_at": "2025-08-26 10:30:00",
    "deleted_at": null
  }
}
```

---

## POST `/tags/delete/{id}`
**Description** : Supprimer un tag (soft delete)

**Authentification** : Requise (propri√©taire du tag ou admin)

**Validation** :
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `409` : Impossible de supprimer ce tag car il est encore utilis√©
  ```json
  {
    "success": false,
    "message": "Impossible de supprimer ce tag car il est encore utilis√©",
    "data": {
      "usage_count": 3
    }
  }
  ```

---

## POST `/tags/restore/{id}`
**Description** : Restaurer un tag supprim√©

**Authentification** : Requise (propri√©taire du tag ou admin)

**Validation** :
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag restaur√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Ce tag n'est pas supprim√©
- `404` : Tag non trouv√©

---

## POST `/tags/search`
**Description** : Rechercher des tags

**Authentification** : Requise

**Donn√©es attendues** :
```json
{
  "q": "terme recherch√©",
  "table_associate": "memories",
  "page": 1,
  "limit": 20
}
```

**Validation** :
- `q` : requis, terme de recherche
- `table_associate` : optionnel, in('groups','memories','elements','files','all')
- `page` : optionnel, num√©ro de page >= 1
- `limit` : optionnel, nombre d'√©l√©ments 1-20

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "R√©sultats de recherche",
  "data": {
    "tags": [],
    "search_term": "Histoire",
    "table_associate": "memories",
    "page": 1,
    "limit": 20
  }
}
```

---

## POST `/tags/my-tags`
**Description** : Mes tags

**Authentification** : Requise

**Donn√©es attendues** :
```json
{
  "page": 1,
  "limit": 50
}
```

**Validation** :
- `page` : optionnel, num√©ro de page >= 1
- `limit` : optionnel, nombre d'√©l√©ments 1-50

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Liste des tags r√©cup√©r√©e",
  "data": {
    "tags": [],
    "page": 1,
    "limit": 50,
    "user_id": 1
  }
}
```

---

## POST `/tags/by-table/{table_associate}`
**Description** : Tags par table associ√©e

**Authentification** : Requise

**Donn√©es attendues** :
```json
{
  "page": 1,
  "limit": 50
}
```

**Validation** :
- `table_associate` : requis, in('groups','memories','elements','files','all')
- `page` : optionnel, num√©ro de page >= 1
- `limit` : optionnel, nombre d'√©l√©ments 1-50

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tags r√©cup√©r√©s pour memories",
  "data": {
    "tags": [],
    "table_associate": "memories",
    "page": 1,
    "limit": 50
  }
}
```

**R√©ponses d'erreur** :
- `400` : Table associ√©e invalide

---

## POST `/tags/most-used`
**Description** : Tags les plus utilis√©s

**Authentification** : Requise

**Donn√©es attendues** :
```json
{
  "table_associate": "memories",
  "limit": 10
}
```

**Validation** :
- `table_associate` : optionnel, in('groups','memories','elements','files','all'), d√©faut 'memories'
- `limit` : optionnel, nombre d'√©l√©ments 1-50, d√©faut 10

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tags les plus utilis√©s",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "tag_owner": 1,
        "usage_count": 15,
        "created_at": "2025-08-26 10:00:00"
      }
    ],
    "table_associate": "memories",
    "limit": 10
  }
}
```

---

## POST `/tags/get-or-create`
**Description** : Obtenir ou cr√©er un tag

**Authentification** : Requise

**Donn√©es attendues** :
```json
{
  "name": "Nouveau tag",
  "table_associate": "memories",
  "color": "#3498db"
}
```

**Validation** :
- `name` : requis, 1-100 caract√®res
- `table_associate` : optionnel, in('groups','memories','elements','files','all'), d√©faut 'memories'
- `color` : optionnel, format #RRGGBB, d√©faut '#3498db'

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag r√©cup√©r√© ou cr√©√©",
  "data": {
    "id": 1,
    "name": "Nouveau tag",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "created_at": "2025-08-26 10:00:00",
    "updated_at": "2025-08-26 10:00:00",
    "deleted_at": null
  }
}
```

---

## POST `/tags/user/{user_id}`
**Description** : Tags d'un utilisateur sp√©cifique (admin seulement)

**Authentification** : Requise (admin)

**Donn√©es attendues** :
```json
{
  "page": 1,
  "limit": 50
}
```

**Validation** :
- `user_id` : requis, ID utilisateur num√©rique
- `page` : optionnel, num√©ro de page >= 1
- `limit` : optionnel, nombre d'√©l√©ments 1-50

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Liste des tags r√©cup√©r√©e",
  "data": {
    "tags": [],
    "page": 1,
    "limit": 50,
    "user_id": 2
  }
}
```

**R√©ponses d'erreur** :
- `400` : ID utilisateur doit √™tre num√©rique
- `403` : Acc√®s non autoris√©

---

---
---

## GET `/tags/{id}`
**Description** : D√©tail d'un tag

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "D√©tails du tag r√©cup√©r√©s",
  "data": {
    "id": 1,
    "name": "Histoire",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "usage_count": 5,
    "created_at": "2025-09-10 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Tag non trouv√©
- `500` : Erreur serveur

---

## PUT `/tags/{id}`
**Description** : Modifier un tag

**Authentification** : üîí Propri√©taire ou Admin

**Donn√©es attendues** :
```json
{
  "name": "Nouveau nom",
  "table_associate": "memories",
  "color": "#3498db"
}
```

**Validation** :
- `id` : requis, ID du tag num√©rique
- `name` : optionnel, 1-100 caract√®res
- `table_associate` : optionnel, in('groups','memories','elements','files','all')
- `color` : optionnel, format #RRGGBB

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag modifi√© avec succ√®s",
  "data": {
    "id": 1,
    "name": "Nouveau nom",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "updated_at": "2025-09-10 10:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Tag non trouv√©
- `500` : Erreur lors de la mise √† jour

---

## DELETE `/tags/{id}`
**Description** : Supprimer un tag (soft delete)

**Authentification** : üîí Propri√©taire ou Admin

**Donn√©es attendues** :
```json
{
  "force_delete": true
}
```

**Validation** :
- `force_delete` : optionnel, bool√©en pour suppression d√©finitive
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Tag non trouv√©
- `409` : Impossible de supprimer ce tag car il est encore utilis√©
- `500` : Erreur lors de la suppression

---

## POST `/tags/{id}/restore`
**Description** : Restaurer un tag supprim√©

**Authentification** : üîí Propri√©taire ou Admin

**Validation** :
- `id` : requis, ID du tag num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag restaur√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Ce tag n'est pas supprim√©
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Tag non trouv√©
- `500` : Erreur lors de la restauration

---

## GET `/tags/my-tags`
**Description** : Mes tags

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, >= 1)
- `limit` : nombre d'√©l√©ments (optionnel, 1-50)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Liste des tags r√©cup√©r√©e",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "usage_count": 5,
        "created_at": "2025-09-10 10:00:00"
      }
    ],
    "page": 1,
    "limit": 50,
    "user_id": 1,
    "total": 12
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## GET `/tags/by-table/{table_associate}`
**Description** : Tags par table associ√©e

**Authentification** : üîí Utilisateur

**Validation** :
- `table_associate` : requis, in('groups','memories','elements','files','all')

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, >= 1)
- `limit` : nombre d'√©l√©ments (optionnel, 1-50)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tags r√©cup√©r√©s pour memories",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "usage_count": 5
      }
    ],
    "table_associate": "memories",
    "page": 1,
    "limit": 50,
    "total": 8
  }
}
```

**R√©ponses d'erreur** :
- `400` : Table associ√©e invalide
- `401` : Authentification requise
- `500` : Erreur serveur

---

## GET `/tags/most-used`
**Description** : Tags les plus utilis√©s

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `table_associate` : filtrer par table (optionnel, d√©faut 'memories')
- `limit` : nombre d'√©l√©ments (optionnel, 1-50, d√©faut 10)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tags les plus utilis√©s",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "tag_owner": 1,
        "usage_count": 15,
        "created_at": "2025-09-10 10:00:00"
      }
    ],
    "table_associate": "memories",
    "limit": 10
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## POST `/tags/get-or-create`
**Description** : Obtenir ou cr√©er un tag

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "name": "Nouveau tag",
  "table_associate": "memories",
  "color": "#3498db"
}
```

**Validation** :
- `name` : requis, 1-100 caract√®res
- `table_associate` : optionnel, in('groups','memories','elements','files','all'), d√©faut 'memories'
- `color` : optionnel, format #RRGGBB, d√©faut '#3498db'

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag r√©cup√©r√© ou cr√©√©",
  "data": {
    "id": 1,
    "name": "Nouveau tag",
    "table_associate": "memories",
    "color": "#3498db",
    "tag_owner": 1,
    "created_at": "2025-09-10 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `500` : Erreur lors de la cr√©ation

---

## GET `/tags/user/{user_id}`
**Description** : Tags d'un utilisateur sp√©cifique (admin seulement)

**Authentification** : üîí Admin

**Validation** :
- `user_id` : requis, ID utilisateur num√©rique

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, >= 1)
- `limit` : nombre d'√©l√©ments (optionnel, 1-50)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Liste des tags r√©cup√©r√©e",
  "data": {
    "tags": [
      {
        "id": 1,
        "name": "Histoire",
        "table_associate": "memories",
        "color": "#3498db",
        "usage_count": 5
      }
    ],
    "page": 1,
    "limit": 50,
    "user_id": 2,
    "total": 8
  }
}
```

**R√©ponses d'erreur** :
- `400` : ID utilisateur doit √™tre num√©rique
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur serveur

---

## PUT `/tags/{tagId}/{item_id}`
**Description** : Associer ou dissocier un tag √† un √©l√©ment (m√©moire, √©l√©ment, fichier, groupe)

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "table_associate": "memories"
}
```

**Validation** :
- `table_associate` : requis, in('groups','memories','elements','files')
- `tagId` : requis, ID de tag num√©rique, accessible par l'utilisateur
- `item_id` : requis, ID d'√©l√©ment num√©rique, accessible par l'utilisateur

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Tag associ√© ou dissoci√© avec succ√®s",
  "data": {
    "tag_id": 1,
    "item_id": 5,
    "table_associate": "memories",
    "action": "associated", // ou "dissociated"
    "association_count": 3
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√© √† l'√©l√©ment ou au tag
- `404` : Tag ou √©l√©ment non trouv√©
- `500` : Erreur lors de l'association

---

# üìÅ Endpoints Files

## POST `/files`
**Description** : Upload d'un fichier g√©n√©rique

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
- Fichier : `file` (multipart/form-data)
- `description` : Description du fichier (optionnel)

**Validation** :
- `file` : requis, fichier valide selon les types autoris√©s
- `description` : optionnel, texte libre
- **Limites de taille** : Images: 5MB, Documents: 10MB, Audio: 20MB, Vid√©o: 50MB
- **Types autoris√©s** : JPEG, PNG, GIF, WebP, PDF, TXT, DOC, DOCX, MP3, WAV, OGG, MP4, AVI, MOV

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Fichier upload√© avec succ√®s",
  "data": {
    "id": 15,
    "original_filename": "document.pdf",
    "file_url": "/uploads/files/15/document.pdf",
    "file_type": "document",
    "file_size": 2048576,
    "mime_type": "application/pdf",
    "description": "Description du fichier",
    "user_id": 1,
    "created_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Aucun fichier valide upload√©
- `401` : Authentification requise
- `413` : Fichier trop volumineux
- `415` : Type de fichier non support√©
- `500` : Erreur lors de l'upload

---

## GET `/files/{id}`
**Description** : T√©l√©charger un fichier

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID du fichier num√©rique

**R√©ponse succ√®s (200)** :
Retourne le fichier binaire avec les en-t√™tes appropri√©s :
```
Content-Type: application/pdf (exemple)
Content-Disposition: attachment; filename="document.pdf"
Content-Length: 2048576
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Fichier non trouv√©
- `500` : Erreur lors de la r√©cup√©ration

---

## GET `/files/{id}/info`
**Description** : Obtenir des informations sur un fichier

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID du fichier num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "id": 15,
    "original_filename": "document.pdf",
    "file_url": "/uploads/files/15/document.pdf",
    "file_type": "document",
    "file_size": 2048576,
    "mime_type": "application/pdf",
    "description": "Description du fichier",
    "user_id": 1,
    "owner_name": "Jean Dupont",
    "created_at": "2025-09-10 14:30:00",
    "updated_at": "2025-09-10 14:30:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Fichier non trouv√©
- `500` : Erreur serveur

---

## DELETE `/files/{id}`
**Description** : Supprimer un fichier. Force_delete pour suppression d√©finitive du fichier √©galement

**Authentification** : üîí Propri√©taire ou Admin

**Donn√©es attendues** :
```json
{
  "force_delete": true
}
```

**Validation** :
- `id` : requis, ID du fichier num√©rique
- `force_delete` : optionnel, bool√©en pour suppression physique du fichier

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Fichier supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Fichier non trouv√©
- `500` : Erreur lors de la suppression

---

## POST `/files/{id}/restore`
**Description** : Restaurer un fichier supprim√© (softdelete)

**Authentification** : üîí Propri√©taire ou Admin

**Validation** :
- `id` : requis, ID du fichier num√©rique

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Fichier restaur√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Ce fichier n'est pas supprim√©
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Fichier non trouv√©
- `500` : Erreur lors de la restauration

---

## GET `/files/user/{user_id}`
**Description** : Lister les fichiers d'un utilisateur

**Authentification** : üîí Propri√©taire ou Admin

**Param√®tres de requ√™te** :
- `limit` : nombre d'√©l√©ments (optionnel, 1-100, d√©faut 20)

**Validation** :
- `user_id` : requis, ID utilisateur num√©rique
- `limit` : optionnel, nombre d'√©l√©ments 1-100, d√©faut 20

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "files": [
      {
        "id": 15,
        "original_filename": "document.pdf",
        "file_type": "document",
        "file_size": 2048576,
        "description": "Description",
        "created_at": "2025-09-10 14:30:00"
      }
    ],
    "user_id": 1,
    "limit": 20,
    "total": 5
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur serveur

---

# üë• Endpoints Groups

## POST `/groups`
**Description** : Cr√©er un groupe

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "name": "Nom du groupe",
  "description": "Description du groupe",
  "visibility": "private",
  "max_members": 50
}
```

**Validation** :
- `name` : requis, 2-255 caract√®res
- `description` : optionnel, texte libre
- `visibility` : optionnel, in('public','private'), d√©faut 'private'
- `max_members` : optionnel, >0 <=1000, d√©faut 50

**R√©ponse succ√®s (201)** :
```json
{
  "success": true,
  "message": "Groupe cr√©√© avec succ√®s",
  "data": {
    "id": 1,
    "name": "Nom du groupe",
    "description": "Description du groupe",
    "visibility": "private",
    "max_members": 50,
    "current_members": 1,
    "owner_id": 1,
    "created_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `500` : Erreur lors de la cr√©ation

---

## GET `/groups/{id}`
**Description** : D√©tails d'un groupe

**Authentification** : üîí Membre, Admin, ou ‚≠ê Non (si public)

**Validation** :
- `id` : requis, ID de groupe valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "Nom du groupe",
    "description": "Description d√©taill√©e du groupe",
    "visibility": "public",
    "max_members": 100,
    "current_members": 25,
    "owner_id": 1,
    "owner_name": "Jean Dupont",
    "created_at": "2025-09-01 10:00:00",
    "updated_at": "2025-09-10 10:00:00",
    "user_role": "member", // si authentifi√© et membre
    "invitation_code": "ABC123XYZ", // si admin du groupe
    "recent_memories": 5,
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `403` : Acc√®s non autoris√© (groupe priv√©)
- `404` : Groupe non trouv√©
- `500` : Erreur serveur

---

## PUT `/groups/{id}`
**Description** : Modifier un groupe

**Authentification** : üîí Admin du groupe ou Admin

**Donn√©es attendues** :
```json
{
  "name": "Nouveau nom",
  "description": "Nouvelle description",
  "visibility": "public",
  "max_members": 75
}
```

**Validation** :
- `id` : requis, ID de groupe valide
- `name` : optionnel, 2-255 caract√®res
- `description` : optionnel, texte libre
- `visibility` : optionnel, in('public','private')
- `max_members` : optionnel, >0 <=1000

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Groupe modifi√© avec succ√®s",
  "data": {
    "id": 1,
    "name": "Nouveau nom",
    "description": "Nouvelle description",
    "visibility": "public",
    "max_members": 75,
    "updated_at": "2025-09-10 14:35:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Groupe non trouv√©
- `500` : Erreur lors de la mise √† jour

---

## DELETE `/groups/{id}`
**Description** : Supprimer un groupe

**Authentification** : üîí Admin du groupe ou Admin

**Donn√©es attendues** :
```json
{
  "force_delete": true
}
```

**Validation** :
- `id` : requis, ID de groupe valide
- `force_delete` : optionnel, bool√©en pour suppression d√©finitive

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Groupe supprim√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Groupe non trouv√©
- `500` : Erreur lors de la suppression

---

## POST `/groups/{id}/restore`
**Description** : Restaurer un groupe supprim√©

**Authentification** : üîí Admin

**Validation** :
- `id` : requis, ID de groupe valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Groupe restaur√© avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `400` : Ce groupe n'est pas supprim√©
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Groupe non trouv√©
- `500` : Erreur lors de la restauration

---

## GET `/groups/user/{user_id}`
**Description** : Groupes d'un utilisateur

**Authentification** : üîí Utilisateur (soi-m√™me) ou Admin

**Validation** :
- `user_id` : requis, ID utilisateur valide

**Param√®tres de requ√™te** :
- `page_size` : taille de page (optionnel, 1-100, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "id": 1,
        "name": "Groupe Histoire",
        "description": "Description abr√©g√©e",
        "visibility": "public",
        "current_members": 25,
        "user_role": "member",
        "created_at": "2025-09-01 10:00:00"
      }
    ],
    "user_id": 1,
    "page_size": 20,
    "total": 3
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√©
- `500` : Erreur serveur

---

## GET `/groups/my-groups`
**Description** : Mes groupes

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `page_size` : taille de page (optionnel, entier 1-100)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "id": 1,
        "name": "Mon Groupe",
        "description": "Description",
        "visibility": "private",
        "current_members": 15,
        "user_role": "admin",
        "invitation_code": "ABC123XYZ",
        "created_at": "2025-09-01 10:00:00"
      }
    ],
    "page_size": 20,
    "total": 5
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## GET `/groups/search`
**Description** : Rechercher des groupes

**Authentification** : üîí Utilisateur

**Param√®tres de requ√™te** :
- `q` : terme de recherche (optionnel)
- `visibility` : filtrer par visibilit√© (optionnel)
- `page_size` : taille de page (optionnel, 1-100)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "id": 1,
        "name": "Groupe Public Recherch√©",
        "description": "Description correspondante",
        "visibility": "public",
        "current_members": 42,
        "created_at": "2025-09-01 10:00:00"
      }
    ],
    "search_term": "recherch√©",
    "page_size": 20,
    "total": 8
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## POST `/groups/{id}/invite`
**Description** : Inviter un utilisateur

**Authentification** : üîí Admin du groupe ou Admin

**Donn√©es attendues** :
```json
{
  "user_email": "user@example.com",
  "role": "member"
}
```

**Validation** :
- `id` : requis, ID de groupe valide
- `user_email` : requis, email valide d'un utilisateur existant
- `role` : optionnel, in('member','moderator','admin'), d√©faut 'member'

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Invitation envoy√©e avec succ√®s",
  "data": {
    "invitation_id": 15,
    "group_id": 1,
    "invited_user_email": "user@example.com",
    "role": "member",
    "invited_by": 1,
    "status": "pending",
    "created_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Groupe ou utilisateur non trouv√©
- `409` : Utilisateur d√©j√† membre du groupe
- `500` : Erreur lors de l'invitation

---

## POST `/groups/join`
**Description** : Rejoindre un groupe avec un code d'invitation

**Authentification** : üîí Utilisateur

**Donn√©es attendues** :
```json
{
  "code": "ABC123XYZ"
}
```

**Validation** :
- `code` : requis, cha√Æne de caract√®res (code d'invitation valide)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Vous avez rejoint le groupe avec succ√®s",
  "data": {
    "group_id": 1,
    "group_name": "Nom du groupe",
    "user_role": "member",
    "joined_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Code d'invitation requis
- `401` : Authentification requise
- `404` : Code d'invitation invalide ou expir√©
- `409` : Vous √™tes d√©j√† membre de ce groupe
- `422` : Groupe plein (limite de membres atteinte)
- `500` : Erreur lors de l'adh√©sion

---

## PUT `/groups/{group_id}/members/{user_id}`
**Description** : Mettre √† jour le r√¥le d'un utilisateur dans un groupe

**Authentification** : üîí Admin du groupe ou Admin

**Donn√©es attendues** :
```json
{
  "role": "moderator"
}
```

**Validation** :
- `group_id` : requis, ID de groupe valide
- `user_id` : requis, ID utilisateur valide (membre du groupe)
- `role` : requis, in('member','moderator','admin')

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "R√¥le de l'utilisateur mis √† jour avec succ√®s",
  "data": {
    "group_id": 1,
    "user_id": 2,
    "user_name": "Marie Dubois",
    "old_role": "member",
    "new_role": "moderator",
    "updated_by": 1,
    "updated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Groupe ou utilisateur non trouv√©
- `422` : Utilisateur pas membre du groupe
- `500` : Erreur lors de la mise √† jour

---

## GET `/groups/my-invitations`
**Description** : Mes invitations en attente

**Authentification** : üîí Utilisateur

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "invitations": [
      {
        "id": 15,
        "group_id": 1,
        "group_name": "Groupe Histoire",
        "group_description": "Description du groupe",
        "invited_role": "member",
        "invited_by_name": "Jean Dupont",
        "status": "pending",
        "created_at": "2025-09-08 10:00:00",
        "expires_at": "2025-09-22 10:00:00"
      }
    ],
    "total": 2
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `500` : Erreur serveur

---

## POST `/groups/{id}/leave`
**Description** : Quitter un groupe. Le propri√©taire ne peut pas quitter le groupe

**Authentification** : üîí Utilisateur

**Validation** :
- `id` : requis, ID de groupe valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Vous avez quitt√© le groupe avec succ√®s"
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Le propri√©taire ne peut pas quitter le groupe
- `404` : Groupe non trouv√©
- `422` : Vous n'√™tes pas membre de ce groupe
- `500` : Erreur lors de la sortie du groupe

---

## GET `/groups/{id}/members`
**Description** : R√©cup√©rer les membres d'un groupe

**Authentification** : üîí Membre ou Admin

**Validation** :
- `id` : requis, ID de groupe valide

**Param√®tres de requ√™te** :
- `page` : num√©ro de page (optionnel, >= 1)
- `limit` : nombre d'√©l√©ments (optionnel, 1-100)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "members": [
      {
        "user_id": 1,
        "name": "Jean Dupont",
        "email": "jean@example.com",
        "role": "admin",
        "profile_image": "/uploads/avatars/1.jpg",
        "joined_at": "2025-09-01 10:00:00",
        "last_activity": "2025-09-10 09:00:00"
      }
    ],
    "group_id": 1,
    "total_members": 25,
    "page": 1,
    "limit": 20
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√© (pas membre du groupe)
- `404` : Groupe non trouv√©
- `500` : Erreur serveur

---

# üìä Endpoints Stats

## POST `/stats/build`
**Description** : G√©n√©rer toutes les statistiques de la plateforme

**Authentification** : üîí Admin

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "message": "Statistiques g√©n√©r√©es avec succ√®s",
  "data": {
    "generation_time": "2025-09-10 14:30:00",
    "execution_time": "2.35 seconds",
    "stats_generated": {
      "platform_stats": true,
      "user_stats": 150,
      "group_stats": 25,
      "memory_stats": 450,
      "file_stats": 280
    }
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `500` : Erreur lors de la g√©n√©ration

---

## GET `/stats/platform`
**Description** : R√©cup√©rer les statistiques globales de la plateforme

**Authentification** : üîí Admin

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "users": {
      "total": 150,
      "active": 120,
      "new_this_month": 15
    },
    "groups": {
      "total": 25,
      "public": 10,
      "private": 15,
      "average_members": 8.5
    },
    "memories": {
      "total": 450,
      "public": 200,
      "private": 250,
      "this_month": 45
    },
    "files": {
      "total": 280,
      "total_size_mb": 1250.5,
      "by_type": {
        "images": 180,
        "documents": 65,
        "audio": 20,
        "video": 15
      }
    },
    "tags": {
      "total": 85,
      "most_used": "Histoire"
    },
    "generated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Statistiques non g√©n√©r√©es
- `500` : Erreur serveur

---

## GET `/stats/groups`
**Description** : R√©cup√©rer les statistiques par groupe

**Authentification** : üîí Admin

**Param√®tres de requ√™te** :
- `offset` : d√©calage pour la pagination (optionnel, d√©faut 0)
- `limit` : nombre d'√©l√©ments (optionnel, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "groups": [
      {
        "group_id": 1,
        "group_name": "Groupe Histoire",
        "members_count": 25,
        "memories_count": 85,
        "files_count": 45,
        "activity_score": 8.7,
        "last_activity": "2025-09-10 12:00:00",
        "created_at": "2025-08-01 10:00:00"
      }
    ],
    "offset": 0,
    "limit": 20,
    "total": 25,
    "generated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Statistiques non g√©n√©r√©es
- `500` : Erreur serveur

---

## GET `/stats/users`
**Description** : R√©cup√©rer les statistiques par utilisateur

**Authentification** : üîí Admin

**Param√®tres de requ√™te** :
- `offset` : d√©calage pour la pagination (optionnel, d√©faut 0)
- `limit` : nombre d'√©l√©ments (optionnel, d√©faut 20)

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "users": [
      {
        "user_id": 1,
        "user_name": "Jean Dupont",
        "user_email": "jean@example.com",
        "memories_count": 25,
        "files_count": 15,
        "groups_count": 3,
        "tags_count": 12,
        "activity_score": 9.2,
        "last_activity": "2025-09-10 12:00:00",
        "account_created": "2025-01-01 10:00:00"
      }
    ],
    "offset": 0,
    "limit": 20,
    "total": 150,
    "generated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Statistiques non g√©n√©r√©es
- `500` : Erreur serveur

---

## GET `/stats/users/{id}`
**Description** : R√©cup√®re les statistiques d'un utilisateur

**Authentification** : üîí Utilisateur (soi-m√™me) ou Admin

**Validation** :
- `id` : requis, ID utilisateur valide

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "user_id": 1,
    "user_name": "Jean Dupont",
    "statistics": {
      "memories_count": 25,
      "memories_public": 15,
      "memories_private": 10,
      "files_count": 15,
      "files_size_mb": 45.2,
      "groups_count": 3,
      "groups_owned": 1,
      "groups_member": 2,
      "tags_count": 12,
      "tags_created": 8,
      "activity_score": 9.2,
      "last_activity": "2025-09-10 12:00:00"
    },
    "account_created": "2025-01-01 10:00:00",
    "generated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `403` : Acc√®s non autoris√©
- `404` : Utilisateur non trouv√© ou statistiques non g√©n√©r√©es
- `500` : Erreur serveur

---

## GET `/stats/my-stats`
**Description** : Statistiques de l'utilisateur connect√©

**Authentification** : üîí Utilisateur

**R√©ponse succ√®s (200)** :
```json
{
  "success": true,
  "data": {
    "user_id": 1,
    "statistics": {
      "memories_count": 25,
      "memories_public": 15,
      "memories_private": 10,
      "files_count": 15,
      "files_size_mb": 45.2,
      "groups_count": 3,
      "groups_owned": 1,
      "groups_member": 2,
      "tags_count": 12,
      "tags_created": 8,
      "activity_score": 9.2,
      "last_activity": "2025-09-10 12:00:00",
      "account_age_days": 252
    },
    "recent_activity": {
      "memories_this_week": 3,
      "files_this_week": 2,
      "groups_joined_this_month": 1
    },
    "account_created": "2025-01-01 10:00:00",
    "generated_at": "2025-09-10 14:30:00"
  }
}
```

**R√©ponses d'erreur** :
- `401` : Authentification requise
- `404` : Statistiques non g√©n√©r√©es pour cet utilisateur
- `500` : Erreur serveur

---

## üìù Notes de fin de documentation

### Derni√®re mise √† jour
**Date** : 10 septembre 2025  
**Version** : 1.1.0  
**Statut** : Documentation compl√®te et √† jour  

### Am√©liorations r√©centes
- ‚úÖ Mise √† jour compl√®te selon API_ENDPOINTS.json  
- ‚úÖ Correction des m√©thodes HTTP (GET, POST, PUT, DELETE)  
- ‚úÖ Ajout des sections Files, Groups et Stats  
- ‚úÖ Standardisation des r√©ponses d'erreur  
- ‚úÖ Am√©lioration des exemples de r√©ponses  
- ‚úÖ Ajout des validations compl√®tes  
- ‚úÖ Documentation des limites et contraintes  

### Support technique
Pour toute question technique ou assistance, contactez l'√©quipe de d√©veloppement.

**Fin de la documentation API Collective Memories v1.1.0**
    "email": "nouveau@email.com",
    "role": "UTILISATEUR",
    "profile_image": "avatars/123_avatar.jpg",
    "bio": "Nouvelle biographie...",
    "phone": "0611223344",
    "date_of_birth": "1990-01-15",
    "location": "Paris",
    "email_verified": 1,
    "last_login": "2025-08-01 10:00:00",
    "created_at": "2025-01-01 10:00:00",
    "updated_at": "2025-08-01 10:00:00",
    "deleted_at": null
  }
}
```

**R√©ponses d'erreur** :
- `400` : Donn√©es de validation invalides
- `404` : Utilisateur non trouv√©
- `409` : Cet email est d√©j√† utilis√©
- `500` : Erreur lors de la mise √† jour

---

---